/*! Wolf Popup Wordpress Plugin v1.0.0 */ 
/*!
 * ModalWindow
 *
 * Popup Manager 1.0.1
 */
/* jshint -W062 */
/* global WVC, WolfPopupParams */
var WolfPopup=function(a){"use strict";return{isMobile:!1,animated:!1,exitIntentFlag:!1,open:!1,timeDelayedClock:0,timeDelayedCount:0,exitIntentOpen:!1,exitIntentClock:0,/**
		 * Init UI
		 */
init:function(){this.isMobile=WolfPopupParams.isMobile,this.isMobile;this.timeDelayedClock=sessionStorage.getItem("wolf-popup-time-delayed-timer"),this.timeDelayedCount=sessionStorage.getItem("wolf-popup-time-delayed-count")||0,this.exitIntentClock=sessionStorage.getItem("wolf-popup-exit-intent-timer"),this.exitIntentCount=sessionStorage.getItem("wolf-popup-exit-intent-count")||0,this.timeDelayedPopUp(),this.exitIntentPopUp(),this.closeButton(),
// Reset and reinit anim effect
a(window).on("wvc_fullpage_changed",function(){WVC.resetAOS(a(".wolf-popup"))}),WVC.resetAOS(a(".wolf-popup")),/* Set popup height */
a(window).resize(function(){a(".wolf-popup-overlay").css({height:a(".wolf-popup-container").height()})})},timeDelayedPopUp:function(){if(a("#wolf-popup-overlay-time-delayed").length){if("opt-out"===Cookies.get("wolf_popup_time_delayed"))
//console.log( 'cookie set' );
return;/**
				 * remove default opt-out link if set in content
				 */
a("#wolf-popup-time-delayed").find(".wolf-popup-close-opt-out").length&&a("#wolf-popup-overlay-time-delayed").find(".wolf-popup-bottom-close").remove();var b=this,c=null,d=a("#wolf-popup-overlay-time-delayed"),e=parseInt(d.data("wolf-popup-delay")),f=(d.data("wolf-popup-cookie-time"),d.data("wolf-popup-count"));
//console.log( _this.timeDelayedCount );
if(f<b.timeDelayedCount)
//console.log( 'already displayed ' + count );
return;/* Start clock */
c=setInterval(function(){
//console.log( delay );
//console.log( _this.clock );
//console.log( _this.closed );
f>b.timeDelayedCount&&e<b.timeDelayedClock&&b.open===!1?(b.timeDelayedClock=0,clearInterval(c),sessionStorage.setItem("wolf-popup-time-delayed-timer",0),/* Show popup */
b.showPopup("time-delayed")):(b.timeDelayedClock++,sessionStorage.setItem("wolf-popup-time-delayed-timer",b.timeDelayedClock))},1e3)}},exitIntentPopUp:function(){if(a("#wolf-popup-overlay-exit-intent").length){if("opt-out"===Cookies.get("wolf_popup_exit_intent"))
//console.log( 'exit intent cookie set' );
return;/**
				 * remove default opt-out link if set in content
				 */
a("#wolf-popup-exit-intent").find(".wolf-popup-close-opt-out").length&&a("#wolf-popup-overlay-exit-intent").find(".wolf-popup-bottom-close").remove();var b=this,c=null,d=a("#wolf-popup-overlay-exit-intent"),e=parseInt(d.data("wolf-popup-delay")),f=(d.data("wolf-popup-cookie-time"),d.data("wolf-popup-count"));
//console.log( _this.exitIntentCount );
if(f<b.exitIntentCount)
//console.log( 'already displayed ' + count );
return;/* Start clock */
c=setInterval(function(){
//console.log( delay );
//console.log( _this.clock );
//console.log( _this.closed );
f>b.exitIntentCount&&e<b.exitIntentClock&&b.open===!1?(b.exitIntentClock=0,clearInterval(c),sessionStorage.setItem("wolf-popup-exit-intent-timer",0),/* Show popup */
a(document).on("mouseleave",function(){
//console.log( 'open ' + _this.open );
b.showPopup("exit-intent")})):(b.exitIntentClock++,sessionStorage.setItem("wolf-popup-exit-intent-timer",b.exitIntentClock))},1e3)}},/**
		 * Close button
		 */
closeButton:function(){var b,c,d,e,f,g=this;a(document).on("click",".wolf-popup-close",function(h){h.preventDefault(),b=a(this),c=b.closest(".wolf-popup-overlay"),d=c.data("wolf-popup-type"),e=c.data("wolf-popup-cookie-time"),f=c.data("wolf-popup-count"),"time-delayed"===d&&(/* Set cookie */
b.hasClass("wolf-popup-close-opt-out")&&Cookies.set("wolf_popup_time_delayed","opt-out",{expires:e,path:"/"}),g.timeDelayedCount++,sessionStorage.setItem("wolf-popup-time-delayed-count",g.timeDelayedCount),f===g.timeDelayedCount&&Cookies.set("wolf_popup_time_delayed","opt-out",{expires:e,path:"/"})),"exit-intent"===d&&(g.exitIntentFlag=!0,b.hasClass("wolf-popup-close-opt-out")&&Cookies.set("wolf_popup_exit_intent","opt-out",{expires:e,path:"/"}),g.exitIntentCount++,sessionStorage.setItem("wolf-popup-exit-intent-count",g.exitIntentCount),f===g.exitIntentCount&&Cookies.set("wolf_popup_exit_intent","opt-out",{expires:e,path:"/"})),g.closeAllPopups()})},closeAllPopups:function(b){var c=this,b=b||a(".wolf-popup-show");b.closest(".wolf-popup-overlay");a(".wolf-popup-overlay").removeClass("wolf-popup-overlay-visible"),a(".wolf-popup-overlay").one(WVC.transitionEventEnd(),function(){a(this).removeClass("wolf-popup-overlay-show"),setTimeout(function(){WVC.delayWow(a(".wolf-popup")),WVC.resetAOS(a(".wolf-popup")),c.open=!1,c.animated=!1},200)})},/**
		 * Detect transition ending
		 */
transitionEventEnd:function(){var a,b=document.createElement("transitionDetector"),c={WebkitTransition:"webkitTransitionEnd",// Saf 6, Android Browser
MozTransition:"transitionend",// only for FF < 15
transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]},showPopup:function(b){var c=this,d=a("#wolf-popup-overlay-"+b);!0!==this.open&&(this.exitIntentFlag&&"exit-intent"===b||(c.animated||(WVC.delayWow(a("#wolf-popup-"+b)),WVC.resetAOS(a("#wolf-popup-"+b))),d.addClass("wolf-popup-overlay-visible"),c.open=!0,
//console.log( 'open' );
d.one(WVC.transitionEventEnd(),function(){d.addClass("wolf-popup-overlay-show"),a("#wolf-popup-"+b).one(WVC.transitionEventEnd(),function(){c.animated||(WVC.doWow(),WVC.doAOS(a(this)),c.animated=!0,window.dispatchEvent(new Event("resize")),window.dispatchEvent(new Event("scroll")))})})))}}}(jQuery);!function(a){"use strict";a(window).on("load",function(){WolfPopup.init()})}(jQuery);